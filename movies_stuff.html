<!DOCTYPE html>
{% load static %}

<html>
	<head>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" />
       <link rel="stylesheet" href="{% static 'movies/app.css' %}"/>


        <title>Aas Movies</title>
	</head>

    <body>
    	<div class="wrapper">
    		<nav class="nav">
    			<div class="container">
    				<div class="nav__menu">
    					<a class="nav__header" href="/">Movies Mania</a>
                        <div class="col-md-5 pull-right">
                        	<form name="search" action="" class="form-inline">
                        		<div class="form-group">
                        			<input type="text" name="query" class="form-control" value="" />
                                    <input style ="cursor:pointer" type="submit" class="btn btn-primary" value="Search" />
                        		</div>
                        	</form>
                        </div>

                        <button type="button" class="btn btn-primary pull-right" data-toggle="modal"
                               style ="cursor:pointer" data-target="#modal-create">Create</button>
    				</div>
    			</div>
    		</nav>
          <p>**Note:For Searching Movie type the intial prefixes then click on search button. </p>
            <section class="result">
                <div class="container">
                    <div class="movies">
                        {% for movie in search_result %}
                            <div class="movies__item">
                                <i class="movies__item-star fa fa-star hide"></i>
                                <p class="movies__item-rating hide">{{ movie.fields.Rating }}/10</p>


                                 <button type="button" id="modal-trigger"
                                         class="movies__item-expander hide"
                                         data-toggle="modal"
                                         data-target="#modal-recv60UWYlHLMcyX5">View Details</button>

                                <img class="movies__item-image"
                                     src='{{ movie.fields.Picture.0.url }}' />
                                <div class="movies__item-title">
                                    <p>{{ movie.fields.Name }}</p>
                                </div>
                            </div>

               <div class="modal fade" id="modal-recv60UWYlHLMcyX5">
                   <div class="modal-dialog">
                       <div class="modal-content">
    		            <div class="modal-header">
    			           <h5 class="modal-title" id="modalName">{{ movie.fields.Name }}</h5>
                         <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
    		            </div>

                   <div class="modal-body">
            	       <div class="movies__item full-width ">
                           <div class="pull-left">


                        <p class="movies__item-notes " >{{ movie.fields.Notes }}</p>

                           </div>
                           <i class="movies__item-star fa fa-star "></i>
                          <p> </p>
                               <p class="movies__item-rating">{{ movie.fields.Rating }}/10</p>

                           <div class="pull-right">
                    <img class="movies__item-image " style ="cursor:pointer"
                         src='{{ movie.fields.Picture.0.url }}' />

                              </div>


                    	    <p></p>

                   	   </div>
                  </div>
                 <div class="modal-footer">
            	   <button type="button" class="btn btn-primary" data-toggle="modal"
                           data-target="#edit-modal-recv60UWYlHLMcyX5">Edit</button>
                  <a href="/delete/recv60UWYlHLMcyX5" class="btn btn-danger">Delete</a>
                 </div>

    	</div>
    </div>
</div>
 <div class="modal fade" id="edit-modal-recv60UWYlHLMcyX5" >
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="editModal">{{ movie.fields.Name }}</h5>
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
			</div>
            <div class="modal-body">
            	<form action="/edit/recv60UWYlHLMcyX5" method="post">
                    <input type='hidden' name='csrfmiddlewaretoken'
                           value='W4hCDB0Y5C9ysPz7aV8TdoHuIX8GuotMkG2RwzoY0AGCtDB4fMXM5QxuiXA9I2dw' />
            		<div class="form-group">
            			<label for="editName">Name</label>
                        <input type="text" class="form-control" id="editName" placeholder="Enter name" name="name"
                               value={{ movie.fields.Name }} required/>
            		</div>

                    <div class="form-group">
                    	<label for="editURL">Image URL</label>
                        <input type="text" class="form-control" id="editURL" placeholder="url" name="url"
                               value={{ movie.fields.Picture.0.url }} />
                    </div>

                     <div class="form-group">
                    	<label for="editRating">Rating</label>
                        <input type="number" class="form-control" id="editRating" placeholder="1-10" name="rating"
                               value={{ movie.fields.Rating }} min="1" max="10" required/>
                    </div>

                     <div class="form-group">
                    	<label for="editNotes">Notes</label>
                         <textarea class="form-control" id="editNotes" placeholder="Add notes" name="notes"
                                   value ={{ movie.fields.Notes }}></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Update</button>

            	</form>
            </div>
		</div>
	</div>
</div>


                        {% endfor %}
                    </div>
                </div>
            </section>
        </div>

  <div class="modal fade" id="modal-create">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Create</h5>
                <button type="button" class="close" data-dismiss="modal">
                	<span>&times;</span>
                </button>
			</div>
            <div class="modal-body">
            	<form action="/create/" method="post">
                    <input type='hidden' name='csrfmiddlewaretoken' value='W4hCDB0Y5C9ysPz7aV8TdoHuIX8GuotMkG2RwzoY0AGCtDB4fMXM5QxuiXA9I2dw' />
                    <div class="form-group">
                        <label for="movieName">Name</label>
                        <input type="text" class="form-control" id="movieName" placeholder="Enter name" name="name" required/>
                    </div>

                    <div class="form-group">
                    	<label for="moviePicture">Picture</label>
                        <input type="text" class="form-control" id="moviePicture" placeholder="Image URL" name="url"/>
                    </div>

                    <div class="form-group">
                    	<label for="movieRating">Rating</label>
                        <input type="number" class="form-control" id="movieRating" placeholder="1-10" name="rating" min="1" max="10" required/>
                    </div>

                    <div class="form-group">
                    	<label for="movieNotes">Notes</label>
                        <textarea name="notes" id="movieNotes" class="form-control"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Create new movie</button>

            	</form>
            </div>
		</div>
	</div>
</div>

        <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="{% static 'movies/app.js' %}"></script>
    </body>
</html>
